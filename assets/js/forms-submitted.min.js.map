{"version":3,"sources":["forms-submitted.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","obj","_scrollToElement","__esModule","default","form","eventName","errors","data","timeStart","pageHeight","submittedForm","window","mc4wp_submitted_form","forms","mc4wp","trigger","event","args","id","element","document","getElementById","element_id","getByElement","Date","now","body","clientHeight","setData","scrollY","auto_scroll","addEventListener","timeElapsed","./misc/scroll-to-element.js","2","x","pageXOffset","documentElement","scrollLeft","y","elem","html","elemRect","getBoundingClientRect","documentHeight","Math","max","scrollHeight","offsetHeight","scrollPosition","bottom","height","maxScrollPosition","min","pageYOffset","calculateScrollOffset","scrollTo"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAE,mBAAmBC,SAASA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,GAAG,CAACS,QAAQ,IAAIb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAQ,IAAI,IAAIL,EAAE,mBAAmBD,SAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACa,EAAE,CAAC,SAAST,EAAQU,EAAOJ,GACxe,aAEA,IAEgCK,EAF5BC,GAE4BD,EAFcX,EAAQ,iCAEDW,EAAIE,WAAaF,EAAM,CAAEG,QAAWH,GAEzF,IAQ2BI,EAAMC,EAAWC,EAAQC,EAC9CC,EACAC,EAVFC,EAAgBC,OAAOC,qBACvBC,EAAQF,OAAOG,MAAMD,MAEzB,SAASE,EAAQC,EAAOC,GACtBJ,EAAME,QAAQE,EAAK,GAAGC,GAAK,IAAMF,EAAOC,GACxCJ,EAAME,QAAQC,EAAOC,GA2CvB,GAAIP,EAAe,CACjB,IAAIS,EAAUC,SAASC,eAAeX,EAAcY,YAChDlB,EAAOS,EAAMU,aAAaJ,GA1CLf,EA2CPA,EA3CaC,EA2CPK,EAAcM,MA3CIV,EA2CGI,EAAcJ,OA3CTC,EA2CiBG,EAAcH,KA1C7EC,EAAYgB,KAAKC,MACjBhB,EAAaW,SAASM,KAAKC,aAE3BrB,GACFF,EAAKwB,QAAQrB,GAIXI,OAAOkB,SAAW,IAAMnB,EAAcoB,cACxC,EAAI7B,EAA0B,SAAGG,EAAKe,SAIxCR,OAAOoB,iBAAiB,OAAQ,WAC9BhB,EAAQ,YAAa,CAACX,IAElBE,EACFS,EAAQ,QAAS,CAACX,EAAME,KAGxBS,EAAQ,UAAW,CAACX,EAAMG,IAE1BQ,EAAQV,EAAW,CAACD,EAAMG,IAER,uBAAdF,GACFU,EAAQ,aAAc,CAACX,EAAMG,GAAM,KAMvC,IAAIyB,EAAcR,KAAKC,MAAQjB,EAE3BE,EAAcoB,aAA6B,IAAdE,GAAsBA,EAAc,KAAQZ,SAASM,KAAKC,eAAiBlB,IAC1G,EAAIR,EAA0B,SAAGG,EAAKe,aAW1C,CAACc,8BAA8B,IAAIC,EAAE,CAAC,SAAS7C,EAAQU,EAAOJ,GAChE,aAmBAI,EAAOJ,QAjBP,SAAkBwB,GAChB,IAAIgB,EAAIxB,OAAOyB,aAAehB,SAASiB,gBAAgBC,WACnDC,EAIN,SAA+BC,GAC7B,IAAId,EAAON,SAASM,KAChBe,EAAOrB,SAASiB,gBAChBK,EAAWF,EAAKG,wBAChBhB,EAAec,EAAKd,aACpBiB,EAAiBC,KAAKC,IAAIpB,EAAKqB,aAAcrB,EAAKsB,aAAcP,EAAKd,aAAcc,EAAKM,aAAcN,EAAKO,cAC3GC,EAAiBP,EAASQ,OAASvB,EAAe,EAAIe,EAASS,OAAS,EACxEC,EAAoBR,EAAiBjB,EACzC,OAAOkB,KAAKQ,IAAIJ,EAAiBtC,OAAO2C,YAAaF,GAZ7CG,CAAsBpC,GAC9BR,OAAO6C,SAASrB,EAAGI,KAgBnB,KAAK,GAAG,CAAC","file":"forms-submitted.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\nvar _scrollToElement = _interopRequireDefault(require(\"./misc/scroll-to-element.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar submittedForm = window.mc4wp_submitted_form;\nvar forms = window.mc4wp.forms;\n\nfunction trigger(event, args) {\n  forms.trigger(args[0].id + '.' + event, args);\n  forms.trigger(event, args);\n}\n\nfunction handleFormRequest(form, eventName, errors, data) {\n  var timeStart = Date.now();\n  var pageHeight = document.body.clientHeight; // re-populate form if an error occurred\n\n  if (errors) {\n    form.setData(data);\n  } // scroll to form\n\n\n  if (window.scrollY <= 10 && submittedForm.auto_scroll) {\n    (0, _scrollToElement[\"default\"])(form.element);\n  } // trigger events on window.load so all other scripts have loaded\n\n\n  window.addEventListener('load', function () {\n    trigger('submitted', [form]);\n\n    if (errors) {\n      trigger('error', [form, errors]);\n    } else {\n      // form was successfully submitted\n      trigger('success', [form, data]); // subscribed / unsubscribed\n\n      trigger(eventName, [form, data]); // for BC: always trigger \"subscribed\" event when firing \"updated_subscriber\" event\n\n      if (eventName === 'updated_subscriber') {\n        trigger('subscribed', [form, data, true]);\n      }\n    } // scroll to form again if page height changed since last scroll, eg because of slow loading images\n    // (only if load didn't take too long to prevent overtaking user scroll)\n\n\n    var timeElapsed = Date.now() - timeStart;\n\n    if (submittedForm.auto_scroll && timeElapsed > 1000 && timeElapsed < 2000 && document.body.clientHeight !== pageHeight) {\n      (0, _scrollToElement[\"default\"])(form.element);\n    }\n  });\n}\n\nif (submittedForm) {\n  var element = document.getElementById(submittedForm.element_id);\n  var form = forms.getByElement(element);\n  handleFormRequest(form, submittedForm.event, submittedForm.errors, submittedForm.data);\n}\n\n},{\"./misc/scroll-to-element.js\":2}],2:[function(require,module,exports){\n'use strict';\n\nfunction scrollTo(element) {\n  var x = window.pageXOffset || document.documentElement.scrollLeft;\n  var y = calculateScrollOffset(element);\n  window.scrollTo(x, y);\n}\n\nfunction calculateScrollOffset(elem) {\n  var body = document.body;\n  var html = document.documentElement;\n  var elemRect = elem.getBoundingClientRect();\n  var clientHeight = html.clientHeight;\n  var documentHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n  var scrollPosition = elemRect.bottom - clientHeight / 2 - elemRect.height / 2;\n  var maxScrollPosition = documentHeight - clientHeight;\n  return Math.min(scrollPosition + window.pageYOffset, maxScrollPosition);\n}\n\nmodule.exports = scrollTo;\n\n},{}]},{},[1]);\n"]}